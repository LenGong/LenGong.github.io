webpackJsonp([1],{310:function(t,e,n){"use strict";var i=n(1),a=n(29),o=n(611),r=n(608),s=n(609);n.d(e,"GameModule",function(){return l});var c=this&&this.__decorate||function(t,e,n,i){var a,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,n,r):a(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(){}return t=c([n.i(i.u)({imports:[a.b,o.a],declarations:[r.a,s.a]}),u("design:paramtypes",[])],t)}()},608:function(t,e,n){"use strict";var i=n(1);n.d(e,"a",function(){return r});var a=this&&this.__decorate||function(t,e,n,i){var a,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,n,r):a(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=function(){function t(){}return t=a([n.i(i.M)({template:n(613)}),o("design:paramtypes",[])],t)}()},609:function(t,e,n){"use strict";var i=n(1),a=n(617);n.n(a);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,i){var a,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,n,r):a(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t=o([n.i(i.M)({selector:"gl-ship",template:n(614),styles:[n(616)]}),r("design:paramtypes",[])],t)}()},611:function(t,e,n){"use strict";var i=n(1),a=n(65),o=n(608),r=n(609);n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,i){var a,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(r=(o<3?a(r):o>3?a(e,n,r):a(e,n))||r);return o>3&&r&&Object.defineProperty(e,n,r),r},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(){}return t=s([n.i(i.u)({imports:[a.a.forChild([{path:"",component:o.a},{path:"ship",component:r.a}])],exports:[a.a]}),c("design:paramtypes",[])],t)}()},613:function(t,e){t.exports='<div class="container">\r\n  <h4 style="text-indent:2em; line-height: 1.6;">\r\n    这个游戏写得早，源码已掉，只有一个压缩了代码，本想修改下适应手机端，但压缩代码实在不好修改，有一些bug也一时改不了，就是键在左右同时按，有时一直转圈。不过实在也不好玩，只是一个练习题。放在这里只是为了练习Angular2，现在是我不知道如何进入组件，用ngOnInit去监听。这游戏是全局，所以不管到哪个组件，游戏都不消亡，你听得到声音。再此进入是接的上次的。如果你有兴趣玩一玩，请点击下面链接进入。\r\n  </h4>\r\n  <button class="btn btn-warning btn-block" [routerLink]="[\'./ship\']">飞船打太空石</button>\r\n</div>\r\n'},614:function(t,e){t.exports='<div class="out">\r\n<div class="in">\r\n  <h2 >飞船打太空石(Javascript)</h2>\r\n  <canvas id="myCanvas" width="800" height="600"></canvas>\r\n  <h4>方向键(←↑→):控制飞船前进转向，空格键发子弹。<br /><br />\r\n    IE9+测试过，firefox不知为何有的mp3声音格式支持，有的不支持。<br /><br />\r\n    此游戏是www.coursera.org里的莱斯大学Python课中的最后一道作业题。<br /><br />\r\n    <span>现改用js实现，为了学习ts的d.ts文件写法，现弄进angular一个模块里，欢迎测试讨论，共同进步。图片、声音资源来自莱斯大学，根据学python时当时声明，图片、声音资源仅供学习用。<br /><br />\r\n    如有问题，请联系：<br />\r\n    QQ:380177713<br />邮箱:scmsgl@163.com\r\n    </span>\r\n  </h4>\r\n</div>\r\n</div>\r\n'},616:function(t,e){t.exports='div.out{\r\n  width: 100%;\r\n  padding: 20px;\r\n  margin-top: -40px;\r\n  background: url("/public/imgsou/img/back2.png");\r\n}\r\ndiv.in{\r\n  width: 1000px;\r\n  margin: 14px auto;\r\n  padding: 10px 10px 30px;\r\n  background: #CCC;\r\n}\r\n#myCanvas{\r\n  border: 2px solid royalblue;\r\n  box-shadow: 2px 4px 2px #444;\r\n}\r\nh2{\r\n  margin: 8px 260px;\r\n  font-size: 24px;\r\n  color: blue;\r\n}\r\nh4{\r\n  width: 160px;\r\n  float: right;\r\n  font-family: "宋体";\r\n  font-size: 14px;\r\n  line-height: 22px;\r\n}\r\nspan {\r\n  color: green;\r\n}\r\n'},617:function(t,e){"use strict";function n(t,e,i,a,o){this.center=t,this.size=e,this.radius=i||0,this.lifespan=a||!1,this.animated=o||!1,"function"!=typeof this.getCenter&&(n.prototype.getCenter=function(){return this.center},n.prototype.getSize=function(){return this.size},n.prototype.getRadius=function(){return this.radius},n.prototype.getLifespan=function(){return this.lifespan},n.prototype.getAnimated=function(){return this.animated})}function i(t){return[Math.cos(t),Math.sin(t)]}function a(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function o(t){t==g.KEY_MAP.left?nt.decrement_angle_vel():t==g.KEY_MAP.right?nt.increment_angle_vel():t==g.KEY_MAP.up?nt.set_thrust(!0):t==g.KEY_MAP.space&&nt.shoot()}function r(t){t==g.KEY_MAP.left?nt.increment_angle_vel():t==g.KEY_MAP.right?nt.decrement_angle_vel():t==g.KEY_MAP.up&&nt.set_thrust(!1)}function s(t){var e=[_/2,b/2],n=L.getSize(),i=!1,a=!1;e[0]-n[0]/2<t[0]&&t[0]<e[0]+n[0]/2&&(i=!0),e[1]-n[1]/2<t[0]&&t[0]<e[0]+n[0]/2&&(a=!0),!R&&i&&a&&(R=!0),N.play()}function c(t,e,n,a,o){this.pos=[t[0],t[1]],this.vel=[e[0],e[1]],this.thrust=!1,this.angle=n,this.angle_vel=0,this.image=a,this.image_center=o.getCenter(),this.image_size=o.getSize(),this.radius=o.getRadius(),"function"!=typeof this.draw&&(c.prototype.draw=function(t){this.thrust?t.drawImage(this.image,[this.image_center[0]+this.image_size[0],this.image_center[1]],this.image_size,this.pos,this.image_size,this.angle):t.drawImage(this.image,this.image_center,this.image_size,this.pos,this.image_size,this.angle)},c.prototype.update=function(){if(this.angle+=this.angle_vel,this.pos[0]=(this.pos[0]+this.vel[0])%_,this.pos[1]=(this.pos[1]+this.vel[1])%b,this.pos[0]<0&&(this.pos[0]=_),this.pos[1]<0&&(this.pos[1]=b),this.thrust){var t=i(this.angle);this.vel[0]+=.1*t[0],this.vel[1]+=.1*t[1]}this.vel[0]*=.99,this.vel[1]*=.99},c.prototype.set_thrust=function(t){this.thrust=t,t?V.play():V.pause()},c.prototype.increment_angle_vel=function(){this.angle_vel+=.05},c.prototype.decrement_angle_vel=function(){this.angle_vel-=.05},c.prototype.shoot=function(){var t=i(this.angle),e=[this.pos[0]+this.radius*t[0],this.pos[1]+this.radius*t[1]],n=[this.vel[0]+6*t[0],this.vel[1]+6*t[1]],a=new u(e,n,this.angle,0,J,F,U);tt.push(a)})}function u(t,e,n,i,o,r,s){this.pos=[t[0],t[1]],this.vel=[e[0],e[1]],this.angle=n,this.angle_vel=i,this.image=o,this.image_center=r.getCenter(),this.image_size=r.getSize(),this.radius=r.getRadius(),this.lifespan=r.getLifespan(),this.animated=r.getAnimated(),this.age=0,s&&s.play(),"function"!=typeof this.draw&&(u.prototype.draw=function(t){t.drawImage(this.image,this.image_center,this.image_size,this.pos,this.image_size,this.angle)},u.prototype.update=function(){return this.angle+=this.angle_vel,this.pos[0]=(this.pos[0]+this.vel[0])%_,this.pos[1]=(this.pos[1]+this.vel[1])%b,this.pos[0]<0&&(this.pos[0]=_),this.pos[1]<0&&(this.pos[1]=b),this.animated&&(this.image_center[0]+=this.age*this.image_size[0]),this.age+=1,this.age==this.lifespan&&(this.animated&&(this.image_center[0]%=this.age*this.image_size[0]),!0)},u.prototype.collide=function(t){var e=a(this.pos,t.pos);return e-this.radius-t.radius<=0})}function l(t){C++;var e=C/4%_,n=D.getCenter(),i=D.getSize();t.drawImage(H,n,i,[e-_/2,b/2],[_,b]),t.drawImage(H,n,i,[e+_/2,b/2],[_,b]),t.drawText("战机",[50,50],20,"White"),t.drawText("分数",[680,50],20,"White"),t.drawText(x-1,[50,80],22,"White"),t.drawText(w,[680,80],22,"White"),!w||w%20||!k||(I++,k=!1,w%100||x++);for(var a=0;a<x-1;a++)t.drawImage(B,[45,45],[90,90],[80+30*a,75],[40,30],-1.57);p(t,$),h(nt)&&(x--,nt.pos=[_/2,b/2],nt.angle=3.14,nt.vel=[0,0]),x||(nt.pos=[_/2,b/2],nt.angle=3.14,nt.vel=[0,0],$.splice(0,$.length),tt.splice(0,tt.length),x=3,N.pause(),R=!1,w=0,I=1),d(),p(t,tt),p(t,et),nt.draw(t),nt.update(),R||t.drawImage(S,L.getCenter(),L.getSize(),[_/2,b/2],L.getSize())}function p(t,e){for(var n in e)e[n].draw(t),e[n].update()&&e.splice(n,1)}function h(t){for(var e in $)if($[e].collide(t))return et.push(new u($[e].pos,[0,0],0,0,X,G,Z)),$.splice(e,1),!0;return!1}function d(){for(var t in tt)h(tt[t])&&(tt.splice(t,1),w+=10,k=!0)}function f(){$.length<I&&R&&(m=[Math.random()*_,Math.random()*b],v=[.6*Math.random()*I/5-.3*I/5,.6*Math.random()*I/5-.3*I/5],y=.2*Math.random()*I/10-.1*I/10,$.push(new u(m,v,0,y,q,Q)))}var g={canvas:void 0,canvasContext:void 0,draw:void 0,update:void 0,createTimer:function(t,e){var n=function(){this.time=t,this.callfun=e};n.prototype={constructor:n,start:function(){i.callfun(),setTimeout(i.start,i.time)}};var i=new n;return i},createFrame:function(t){var e=function(){g.canvas=t,g.canvasContext=g.canvas.getContext("2d"),this.flag=!1};return e.prototype={constructor:e,setCanvasBackground:function(t,e){g.canvas.style.backgroundColor=t||"rgb(0,0,0)",g.canvas.style.backgroundImage=e},setClickHandle:function(t){g.canvas.onmousedown=function(e){var n=parseInt(this.style.borderLeftWidth)||0,i=parseInt(this.style.borderTopWidth)||0,a=e.clientX-this.getBoundingClientRect().left-n,o=e.clientY-this.getBoundingClientRect().top-i;t([a,o])}},setKeyupHandle:function(t){document.onkeyup=function(e){32!=e.keyCode&&37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode||e.preventDefault(),t(e.keyCode),this.flag=!1}},setKeydownHandle:function(t){document.onkeydown=function(e){32!=e.keyCode&&37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode||e.preventDefault(),this.flag||t(e.keyCode),this.flag=!0}},setDrawHandle:function(t){l=t},start:function(){g.mainLoop()}},new e},mainLoop:function(){g.canvasContext.clearRect(0,0,g.canvas.width,g.canvas.height),l(g.canvasin),window.setTimeout(g.mainLoop,1e3/60)},loadImage:function(t){var e=new Image;return e.src=t,e},loadAudio:function(t){var e=new Audio;return e.src=t,e},canvasin:{drawText:function(t,e,n,i){g.canvasContext.font=n+"px 宋体",g.canvasContext.fillStyle=i,g.canvasContext.fillText(t,e[0],e[1])},drawImage:function(t,e,n,i,a,o){var r=o||0,s=new Image;s.src=t.src;var c=e[0]-n[0]/2,u=e[1]-n[1]/2,l=i[0]-e[0]%n[0]-(a[0]-n[0])/2,p=i[1]-e[1]%n[1]-(a[1]-n[1])/2;g.canvasContext.save(),g.canvasContext.translate(i[0],i[1]),g.canvasContext.rotate(r),g.canvasContext.translate(-i[0],-i[1]),g.canvasContext.drawImage(s,c,u,n[0],n[1],l,p,a[0],a[1]),g.canvasContext.restore()}},KEY_MAP:{left:37,up:38,right:39,space:32}},m=null,v=null,y=null,_=800,b=600,w=0,x=3,C=0,R=!1,k=!1,I=1,z="/public/imgsou/img/debris2_blue.png",M="/public/imgsou/img/splash.png",j="/public/imgsou/img/double_ship.png",A="/public/imgsou/img/shot2.png",P="/public/imgsou/img/asteroid_blue.png",O="/public/imgsou/img/explosion_alpha.png",K="/public/imgsou/sound/soundtrack.mp3",E="/public/imgsou/sound/missile.mp3",T="/public/imgsou/sound/thrust.mp3",Y="/public/imgsou/sound/explosion.mp3",D=new n([320,240],[640,480]),H=g.loadImage(z),L=new n([200,150],[400,300]),S=g.loadImage(M),W=new n([45,45],[90,90],35),B=g.loadImage(j),F=new n([5,5],[10,10],3,60),J=g.loadImage(A),Q=new n([45,45],[90,90],40),q=g.loadImage(P),G=new n([64,64],[128,128],17,24,!0),X=g.loadImage(O),N=g.loadAudio(K);N.loop=!0,N.volume=.8;var U=g.loadAudio(E),V=g.loadAudio(T);V.loop=!0;var Z=g.loadAudio(Y),$=[],tt=[],et=[],nt=new c([_/2,b/2],[0,0],3.14,B,W),it=!0;document.body.addEventListener("click",function(){if(it){var t=document.getElementById("myCanvas"),e=g.createFrame(t),n="rgba(245,200,21,0.3)",i="url(/public/imgsou/img/nebula_blue.f2014.png)",a=g.createTimer(1e3-20*I,f);e.setCanvasBackground(n,i),e.setClickHandle(s),e.setKeyupHandle(r),e.setKeydownHandle(o),e.setDrawHandle(l),a.start(),e.start()}},!1)}});